ml_methods = ['regLogistic', 'rf']
seeds = range(100, 101)

rule targets:
    input:
        expand("results/{method}_{seed}.Rds", method = ml_methods, seed = seeds)

rule preprocess_data:
    input:
        R="code/preproc.R",
        csv="data/raw/otu_medium.csv"
    output:
        rds='data/processed/otu_medium.Rds'
    script:
        "{input.R}"

rule run_ml:
    input:
        R="code/ml.R",
        rds=rules.preprocess_data.output.rds
    output:
        rds="results/{method}_{seed}.Rds"
    params:
        method="{method}",
        seed="{seed}"
    script:
        "{input.R}"

# TODO; plots, report, etc.